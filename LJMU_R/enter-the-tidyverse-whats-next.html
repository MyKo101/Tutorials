<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Enter The Tidyverse: What’s Next? | Statistics In R</title>
  <meta name="description" content="An introduction to the software R, designed for LJMU Students" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Enter The Tidyverse: What’s Next? | Statistics In R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://myko101.github.io/Tutorials/LJMU_R/" />
  
  <meta property="og:description" content="An introduction to the software R, designed for LJMU Students" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Enter The Tidyverse: What’s Next? | Statistics In R" />
  
  <meta name="twitter:description" content="An introduction to the software R, designed for LJMU Students" />
  



<meta name="date" content="2020-11-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="enter-the-tidyverse-verbs.html"/>
<link rel="next" href="show-your-work.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="shortcut icon" href="favicon.png">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Statistics in R</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-rstudio"><i class="fa fa-check"></i><b>1.1</b> R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r"><i class="fa fa-check"></i><b>1.1.1</b> R</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#rstudio"><i class="fa fa-check"></i><b>1.1.2</b> RStudio</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#where-to-get-them"><i class="fa fa-check"></i><b>1.1.3</b> Where to get them?</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#first-steps"><i class="fa fa-check"></i><b>1.1.4</b> First steps</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-types"><i class="fa fa-check"></i><b>1.2</b> Data Types</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variables"><i class="fa fa-check"></i><b>1.2.1</b> Variables</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#numeric-data"><i class="fa fa-check"></i><b>1.2.2</b> Numeric Data</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#logical-data"><i class="fa fa-check"></i><b>1.2.3</b> Logical Data</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#character-data"><i class="fa fa-check"></i><b>1.2.4</b> Character Data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>1.3</b> Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help-files"><i class="fa fa-check"></i><b>1.3.1</b> Help Files</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#search"><i class="fa fa-check"></i><b>1.3.2</b> Search</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ask"><i class="fa fa-check"></i><b>1.3.3</b> Ask</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectorisation"><i class="fa fa-check"></i><b>1.4</b> Vectorisation</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectors"><i class="fa fa-check"></i><b>1.4.1</b> Vectors</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#subsetting"><i class="fa fa-check"></i><b>1.4.2</b> Subsetting</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#statistics"><i class="fa fa-check"></i><b>1.5</b> Statistics</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data"><i class="fa fa-check"></i><b>1.5.1</b> Data</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#describing-our-data"><i class="fa fa-check"></i><b>1.5.2</b> Describing our data</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#plotting"><i class="fa fa-check"></i><b>1.5.3</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#probabilities"><i class="fa fa-check"></i><b>1.6</b> Probabilities</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-distributions"><i class="fa fa-check"></i><b>1.6.1</b> Data Distributions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html"><i class="fa fa-check"></i><b>2</b> Enter The Tidyverse: Verbs</a>
<ul>
<li class="chapter" data-level="2.1" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#packages"><i class="fa fa-check"></i><b>2.2</b> Packages</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#installing-packages"><i class="fa fa-check"></i><b>2.2.1</b> Installing packages</a></li>
<li class="chapter" data-level="2.2.2" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#cran"><i class="fa fa-check"></i><b>2.2.2</b> CRAN</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#the-pipe"><i class="fa fa-check"></i><b>2.3</b> The Pipe</a></li>
<li class="chapter" data-level="2.4" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#tibbles"><i class="fa fa-check"></i><b>2.4</b> Tibbles</a></li>
<li class="chapter" data-level="2.5" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#one-table-verbs"><i class="fa fa-check"></i><b>2.5</b> One Table Verbs</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#filter"><i class="fa fa-check"></i><b>2.5.1</b> filter()</a></li>
<li class="chapter" data-level="2.5.2" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#slice"><i class="fa fa-check"></i><b>2.5.2</b> slice()</a></li>
<li class="chapter" data-level="2.5.3" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#arrange"><i class="fa fa-check"></i><b>2.5.3</b> arrange()</a></li>
<li class="chapter" data-level="2.5.4" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#select"><i class="fa fa-check"></i><b>2.5.4</b> select()</a></li>
<li class="chapter" data-level="2.5.5" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#mutate"><i class="fa fa-check"></i><b>2.5.5</b> mutate()</a></li>
<li class="chapter" data-level="2.5.6" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#summarise"><i class="fa fa-check"></i><b>2.5.6</b> summarise()</a></li>
<li class="chapter" data-level="2.5.7" data-path="enter-the-tidyverse-verbs.html"><a href="enter-the-tidyverse-verbs.html#group_by"><i class="fa fa-check"></i><b>2.5.7</b> group_by()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html"><i class="fa fa-check"></i><b>3</b> Enter The Tidyverse: What’s Next?</a>
<ul>
<li class="chapter" data-level="3.1" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#refresher"><i class="fa fa-check"></i><b>3.1</b> Refresher</a></li>
<li class="chapter" data-level="3.2" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#pivoting"><i class="fa fa-check"></i><b>3.2</b> Pivoting</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#pivot_longer"><i class="fa fa-check"></i><b>3.2.1</b> pivot_longer()</a></li>
<li class="chapter" data-level="3.2.2" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#pivot_wider"><i class="fa fa-check"></i><b>3.2.2</b> pivot_wider()</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#two-table-verbs"><i class="fa fa-check"></i><b>3.3</b> Two Table Verbs</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#bind_rows"><i class="fa fa-check"></i><b>3.3.1</b> bind_rows()</a></li>
<li class="chapter" data-level="3.3.2" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#bind_cols"><i class="fa fa-check"></i><b>3.3.2</b> bind_cols()</a></li>
<li class="chapter" data-level="3.3.3" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#joins"><i class="fa fa-check"></i><b>3.3.3</b> joins</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#decisions"><i class="fa fa-check"></i><b>3.4</b> Decisions</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#if_else"><i class="fa fa-check"></i><b>3.4.1</b> if_else()</a></li>
<li class="chapter" data-level="3.4.2" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#recode"><i class="fa fa-check"></i><b>3.4.2</b> recode()</a></li>
<li class="chapter" data-level="3.4.3" data-path="enter-the-tidyverse-whats-next.html"><a href="enter-the-tidyverse-whats-next.html#case_when"><i class="fa fa-check"></i><b>3.4.3</b> case_when()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="show-your-work.html"><a href="show-your-work.html"><i class="fa fa-check"></i><b>4</b> Show Your Work</a></li>
<li class="chapter" data-level="5" data-path="final-coding.html"><a href="final-coding.html"><i class="fa fa-check"></i><b>5</b> Final Coding</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistics In R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="enter-the-tidyverse-whats-next" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Enter The Tidyverse: What’s Next?</h1>
<div id="refresher" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Refresher</h2>
<p>Previously, we learned what a <code>tibble</code> is and how it stores data in observations/rows and variables/columns. We also learned about 7 fundamental data manipulation functions to allow us to edit these tibbles.</p>
<ul>
<li>filter() - selects observations based on a criteria/predicate</li>
<li>slice() - selects obersevations based on number</li>
<li>arrange() - re-arranges rows based on a variable</li>
<li>select() - picks certain variables</li>
<li>mutate() - changes variables or creates new ones</li>
<li>summarise() - aggregates variables based on some functions</li>
<li>group_by() - groups data sets by variables</li>
</ul>
</div>
<div id="pivoting" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Pivoting</h2>
<p>In general, datasets come in two forms, <strong>long</strong> or <strong>wide</strong>. Long data has many rows and fewer columns, and so it looks longer (vertically) if shown in a spreadsheet. Wide data has more columns and fewer rows (hence, it is wider). Data can be represented in both ways and each has advantages.</p>
<p>This terminology might seem confusing for now, but we’re going to jump into an example dataset which includes how songs moved through the charts in the year 2000. We’re given the date when the song entered the chart (which is always a Saturday) and then the ranking within the charts for the next 76 weeks. This data is in wide format.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="enter-the-tidyverse-whats-next.html#cb192-1"></a>billboard</span></code></pre></div>
<pre><code>## # A tibble: 317 x 79
##    artist track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8
##    &lt;chr&gt;  &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 2 Pac  Baby~ 2000-02-26      87    82    72    77    87    94    99    NA
##  2 2Ge+h~ The ~ 2000-09-02      91    87    92    NA    NA    NA    NA    NA
##  3 3 Doo~ Kryp~ 2000-04-08      81    70    68    67    66    57    54    53
##  4 3 Doo~ Loser 2000-10-21      76    76    72    69    67    65    55    59
##  5 504 B~ Wobb~ 2000-04-15      57    34    25    17    17    31    36    49
##  6 98^0   Give~ 2000-08-19      51    39    34    26    26    19     2     2
##  7 A*Tee~ Danc~ 2000-07-08      97    97    96    95   100    NA    NA    NA
##  8 Aaliy~ I Do~ 2000-01-29      84    62    51    41    38    35    35    38
##  9 Aaliy~ Try ~ 2000-03-18      59    53    38    28    21    18    16    14
## 10 Adams~ Open~ 2000-08-26      76    76    74    69    68    67    61    58
## # ... with 307 more rows, and 68 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;,
## #   wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;, wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;,
## #   wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;, wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;,
## #   wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;, wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;,
## #   wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;, wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;,
## #   wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;, wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;,
## #   wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;,
## #   wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, wk49 &lt;dbl&gt;, wk50 &lt;dbl&gt;, wk51 &lt;dbl&gt;, wk52 &lt;dbl&gt;,
## #   wk53 &lt;dbl&gt;, wk54 &lt;dbl&gt;, wk55 &lt;dbl&gt;, wk56 &lt;dbl&gt;, wk57 &lt;dbl&gt;, wk58 &lt;dbl&gt;,
## #   wk59 &lt;dbl&gt;, wk60 &lt;dbl&gt;, wk61 &lt;dbl&gt;, wk62 &lt;dbl&gt;, wk63 &lt;dbl&gt;, wk64 &lt;dbl&gt;,
## #   wk65 &lt;dbl&gt;, wk66 &lt;lgl&gt;, wk67 &lt;lgl&gt;, wk68 &lt;lgl&gt;, wk69 &lt;lgl&gt;, wk70 &lt;lgl&gt;,
## #   wk71 &lt;lgl&gt;, wk72 &lt;lgl&gt;, wk73 &lt;lgl&gt;, wk74 &lt;lgl&gt;, wk75 &lt;lgl&gt;, wk76 &lt;lgl&gt;</code></pre>
<p>Each row represents one song, and therefore our <em>observations</em> are single songs and looking at when each song was in the charts. The position in the charts for each week from it’s date of release is represented by a separate variable.</p>
<div id="pivot_longer" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> pivot_longer()</h3>
<p>But, we might want an observation to represent each week for a track and so we can turn this data from <em>wide</em> to <em>long</em> format using the <code>pivot_longer()</code> function. The data currently has 317 rows and 76 weeks, so the resulting dataset should have 2.4092^{4} rows, since each track will now appear across 76 rows.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="enter-the-tidyverse-whats-next.html#cb194-1"></a>billboard <span class="op">%&gt;%</span></span>
<span id="cb194-2"><a href="enter-the-tidyverse-whats-next.html#cb194-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb194-3"><a href="enter-the-tidyverse-whats-next.html#cb194-3"></a>    <span class="dt">cols =</span> <span class="kw">starts_with</span>(<span class="st">&quot;wk&quot;</span>),</span>
<span id="cb194-4"><a href="enter-the-tidyverse-whats-next.html#cb194-4"></a>    <span class="dt">names_to =</span> <span class="st">&quot;week_num&quot;</span>,</span>
<span id="cb194-5"><a href="enter-the-tidyverse-whats-next.html#cb194-5"></a>    <span class="dt">values_to =</span> <span class="st">&quot;position&quot;</span></span>
<span id="cb194-6"><a href="enter-the-tidyverse-whats-next.html#cb194-6"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 24,092 x 5
##    artist track                   date.entered week_num position
##    &lt;chr&gt;  &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt;       &lt;dbl&gt;
##  1 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk1            87
##  2 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk2            82
##  3 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk3            72
##  4 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk4            77
##  5 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk5            87
##  6 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk6            94
##  7 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk7            99
##  8 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk8            NA
##  9 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk9            NA
## 10 2 Pac  Baby Don&#39;t Cry (Keep... 2000-02-26   wk10           NA
## # ... with 24,082 more rows</code></pre>
<p>So we used the <code>pivot_longer()</code> function with 4 arguments. Remember that the first argument is our dataset being piped in. Then we’ve given a name to the new variable that takes the previous variable names (<code>names_to</code>), similarly for the values we are extracting (<code>values_to</code>). The other argument is using a <code>tidy helper</code> called <code>starts_with()</code>. Remember the <code>everything()</code> helper from last time when we were using the <code>select()</code> function? This works similarly. It’s saying that the columns we want to pivot are the ones that start with <code>"wk"</code>.</p>
<p>This dataset looks much bigger because it has more observations, but it’s still representing the same data. <code>pivot_longer()</code> has a few other tricks that we can do. For example, there are now lot of <code>NA</code> values in the <code>position</code> variable, these represent weeks when the track fell out of the top 100. We could use <code>filter()</code> to get rid of these, or we can tell <code>pivot_longer()</code> to do it for us.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="enter-the-tidyverse-whats-next.html#cb196-1"></a>billboard <span class="op">%&gt;%</span></span>
<span id="cb196-2"><a href="enter-the-tidyverse-whats-next.html#cb196-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb196-3"><a href="enter-the-tidyverse-whats-next.html#cb196-3"></a>    <span class="dt">cols =</span> <span class="kw">starts_with</span>(<span class="st">&quot;wk&quot;</span>),</span>
<span id="cb196-4"><a href="enter-the-tidyverse-whats-next.html#cb196-4"></a>    <span class="dt">names_to =</span> <span class="st">&quot;week_num&quot;</span>,</span>
<span id="cb196-5"><a href="enter-the-tidyverse-whats-next.html#cb196-5"></a>    <span class="dt">values_to =</span> <span class="st">&quot;position&quot;</span>,</span>
<span id="cb196-6"><a href="enter-the-tidyverse-whats-next.html#cb196-6"></a>    <span class="dt">values_drop_na =</span> <span class="ot">TRUE</span></span>
<span id="cb196-7"><a href="enter-the-tidyverse-whats-next.html#cb196-7"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5,307 x 5
##    artist  track                   date.entered week_num position
##    &lt;chr&gt;   &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt;       &lt;dbl&gt;
##  1 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk1            87
##  2 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk2            82
##  3 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk3            72
##  4 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk4            77
##  5 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk5            87
##  6 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk6            94
##  7 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26   wk7            99
##  8 2Ge+her The Hardest Part Of ... 2000-09-02   wk1            91
##  9 2Ge+her The Hardest Part Of ... 2000-09-02   wk2            87
## 10 2Ge+her The Hardest Part Of ... 2000-09-02   wk3            92
## # ... with 5,297 more rows</code></pre>
<p>We’ve not got much less rows since we’ve gotten rid of the <code>NA</code> values from the <code>position</code> variable. The <code>values_drop_na</code> argument does exactly what the name suggests. Should we drop the <code>NA</code>s or keep them? If we want to work with this dataset though, we’d prefer that <code>week_num</code> column to be a number, at the minute it’s <em>character</em>, which means we can’t do any maths on it. <code>pivot_longer()</code> can get rid of the <code>"wk"</code> part of this and convert it to a number using two more arguments:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="enter-the-tidyverse-whats-next.html#cb198-1"></a>billboard_long &lt;-<span class="st"> </span>billboard <span class="op">%&gt;%</span></span>
<span id="cb198-2"><a href="enter-the-tidyverse-whats-next.html#cb198-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb198-3"><a href="enter-the-tidyverse-whats-next.html#cb198-3"></a>    <span class="dt">cols =</span> <span class="kw">starts_with</span>(<span class="st">&quot;wk&quot;</span>),</span>
<span id="cb198-4"><a href="enter-the-tidyverse-whats-next.html#cb198-4"></a>    <span class="dt">names_to =</span> <span class="st">&quot;week_num&quot;</span>,</span>
<span id="cb198-5"><a href="enter-the-tidyverse-whats-next.html#cb198-5"></a>    <span class="dt">values_to =</span> <span class="st">&quot;position&quot;</span>,</span>
<span id="cb198-6"><a href="enter-the-tidyverse-whats-next.html#cb198-6"></a>    <span class="dt">values_drop_na =</span> <span class="ot">TRUE</span>,</span>
<span id="cb198-7"><a href="enter-the-tidyverse-whats-next.html#cb198-7"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb198-8"><a href="enter-the-tidyverse-whats-next.html#cb198-8"></a>    <span class="dt">names_transform =</span> <span class="kw">list</span>(<span class="dt">week_num =</span> as.integer)</span>
<span id="cb198-9"><a href="enter-the-tidyverse-whats-next.html#cb198-9"></a>  )</span>
<span id="cb198-10"><a href="enter-the-tidyverse-whats-next.html#cb198-10"></a>billboard_long</span></code></pre></div>
<pre><code>## # A tibble: 5,307 x 5
##    artist  track                   date.entered week_num position
##    &lt;chr&gt;   &lt;chr&gt;                   &lt;date&gt;          &lt;int&gt;    &lt;dbl&gt;
##  1 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          1       87
##  2 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          2       82
##  3 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          3       72
##  4 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          4       77
##  5 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          5       87
##  6 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          6       94
##  7 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          7       99
##  8 2Ge+her The Hardest Part Of ... 2000-09-02          1       91
##  9 2Ge+her The Hardest Part Of ... 2000-09-02          2       87
## 10 2Ge+her The Hardest Part Of ... 2000-09-02          3       92
## # ... with 5,297 more rows</code></pre>
<p>The <code>names_prefix</code> argument told <code>pivot_longer()</code> to strip out the <code>"wk"</code> part of the <code>week_num</code> variable and then the <code>names_transform</code> applied the <code>as.integer()</code> function to these values. This one function just did quite a lot of work for us!</p>
<p>Bear in mind that the arguments above can be given to the function in <em>any</em> order, as long as they are <em>named</em>.</p>
</div>
<div id="pivot_wider" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> pivot_wider()</h3>
<p>But what if we want to turn the data back? Or, in general, we want to convert a long dataset into a wide one? Well <code>pivot_longer()</code> has a twin called <code>pivot_wider()</code>. The arguments look very similar and so is their usage:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="enter-the-tidyverse-whats-next.html#cb200-1"></a>billboard_long <span class="op">%&gt;%</span></span>
<span id="cb200-2"><a href="enter-the-tidyverse-whats-next.html#cb200-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb200-3"><a href="enter-the-tidyverse-whats-next.html#cb200-3"></a>    <span class="dt">names_from =</span> <span class="st">&quot;week_num&quot;</span>,</span>
<span id="cb200-4"><a href="enter-the-tidyverse-whats-next.html#cb200-4"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb200-5"><a href="enter-the-tidyverse-whats-next.html#cb200-5"></a>    <span class="dt">values_from =</span> <span class="st">&quot;position&quot;</span></span>
<span id="cb200-6"><a href="enter-the-tidyverse-whats-next.html#cb200-6"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 317 x 68
##    artist track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8
##    &lt;chr&gt;  &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 2 Pac  Baby~ 2000-02-26      87    82    72    77    87    94    99    NA
##  2 2Ge+h~ The ~ 2000-09-02      91    87    92    NA    NA    NA    NA    NA
##  3 3 Doo~ Kryp~ 2000-04-08      81    70    68    67    66    57    54    53
##  4 3 Doo~ Loser 2000-10-21      76    76    72    69    67    65    55    59
##  5 504 B~ Wobb~ 2000-04-15      57    34    25    17    17    31    36    49
##  6 98^0   Give~ 2000-08-19      51    39    34    26    26    19     2     2
##  7 A*Tee~ Danc~ 2000-07-08      97    97    96    95   100    NA    NA    NA
##  8 Aaliy~ I Do~ 2000-01-29      84    62    51    41    38    35    35    38
##  9 Aaliy~ Try ~ 2000-03-18      59    53    38    28    21    18    16    14
## 10 Adams~ Open~ 2000-08-26      76    76    74    69    68    67    61    58
## # ... with 307 more rows, and 57 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;,
## #   wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;, wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;,
## #   wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;, wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;,
## #   wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;, wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;,
## #   wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;, wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;,
## #   wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;, wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;,
## #   wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;,
## #   wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, wk49 &lt;dbl&gt;, wk50 &lt;dbl&gt;, wk51 &lt;dbl&gt;, wk52 &lt;dbl&gt;,
## #   wk53 &lt;dbl&gt;, wk54 &lt;dbl&gt;, wk55 &lt;dbl&gt;, wk56 &lt;dbl&gt;, wk57 &lt;dbl&gt;, wk58 &lt;dbl&gt;,
## #   wk59 &lt;dbl&gt;, wk60 &lt;dbl&gt;, wk61 &lt;dbl&gt;, wk62 &lt;dbl&gt;, wk63 &lt;dbl&gt;, wk64 &lt;dbl&gt;,
## #   wk65 &lt;dbl&gt;</code></pre>
<p>Pretty simple to do this and it gets the data back to how it was previously. Oftentimes it can be quite useful to pivot data around and then return back to it’s original form.</p>
<p>A reason we might want to do this is to edit all of the week data all at once. In the <code>billboard</code> dataset, the position in the charts is based on number of weeks since the track was released. So 2 Pac’s Baby Don’t Cry in the first row, was released a few months before 3 Doors Down’s Kryptonite, but a week after each of their releases they were in chart position 87 and 91 respectively. What if we wanted to know where they were for the actual weeks of the year?</p>
<p>First we’re going to load up another package called <code>lubridate</code> which makes working with dates a lot smoother.</p>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<p>And then we can figure out how far into the year each song was released (note that the <code>date.entered</code> is a Saturday and the year 2000 started on a Saturday). To do this, we’ll subtract the 1st January from the <code>date.entered</code> to get the number of days between them and then divide it by 7 to get the number of weeks. By adding the <code>week_num - 1</code>, we can see which week each position is from, and we can overwrite the <code>week_num</code> value with this new value.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="enter-the-tidyverse-whats-next.html#cb204-1"></a>billboard_long <span class="op">%&gt;%</span></span>
<span id="cb204-2"><a href="enter-the-tidyverse-whats-next.html#cb204-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">week_num =</span> <span class="kw">as.integer</span>((date.entered <span class="op">-</span><span class="st"> </span><span class="kw">dmy</span>(<span class="st">&quot;01/01/2000&quot;</span>))<span class="op">/</span><span class="dv">7</span>) <span class="op">+</span><span class="st"> </span>week_num <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5,307 x 5
##    artist  track                   date.entered week_num position
##    &lt;chr&gt;   &lt;chr&gt;                   &lt;date&gt;          &lt;dbl&gt;    &lt;dbl&gt;
##  1 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          8       87
##  2 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26          9       82
##  3 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26         10       72
##  4 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26         11       77
##  5 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26         12       87
##  6 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26         13       94
##  7 2 Pac   Baby Don&#39;t Cry (Keep... 2000-02-26         14       99
##  8 2Ge+her The Hardest Part Of ... 2000-09-02         35       91
##  9 2Ge+her The Hardest Part Of ... 2000-09-02         36       87
## 10 2Ge+her The Hardest Part Of ... 2000-09-02         37       92
## # ... with 5,297 more rows</code></pre>
<p>Next we can <code>filter()</code> out the weeks from outside of the year 2000 by getting rid of <code>week_num</code> that are less than 0 or greater than 52, and then by sorting the data by this <code>week_num</code>, we’ll get the columns in the right order when we come to <code>pivot_wider()</code> back around.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="enter-the-tidyverse-whats-next.html#cb206-1"></a>billboard_long <span class="op">%&gt;%</span></span>
<span id="cb206-2"><a href="enter-the-tidyverse-whats-next.html#cb206-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">week_num =</span> <span class="kw">as.integer</span>((date.entered <span class="op">-</span><span class="st"> </span><span class="kw">dmy</span>(<span class="st">&quot;01/01/2000&quot;</span>))<span class="op">/</span><span class="dv">7</span>) <span class="op">+</span><span class="st"> </span>week_num <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span></span>
<span id="cb206-3"><a href="enter-the-tidyverse-whats-next.html#cb206-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(week_num,<span class="dv">0</span>,<span class="dv">52</span>)) <span class="op">%&gt;%</span></span>
<span id="cb206-4"><a href="enter-the-tidyverse-whats-next.html#cb206-4"></a><span class="st">  </span><span class="kw">arrange</span>(week_num) <span class="op">%&gt;%</span></span>
<span id="cb206-5"><a href="enter-the-tidyverse-whats-next.html#cb206-5"></a><span class="st">  </span><span class="kw">pivot_wider</span>(</span>
<span id="cb206-6"><a href="enter-the-tidyverse-whats-next.html#cb206-6"></a>    <span class="dt">names_from =</span> week_num,</span>
<span id="cb206-7"><a href="enter-the-tidyverse-whats-next.html#cb206-7"></a>    <span class="dt">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb206-8"><a href="enter-the-tidyverse-whats-next.html#cb206-8"></a>    <span class="dt">values_from =</span> position</span>
<span id="cb206-9"><a href="enter-the-tidyverse-whats-next.html#cb206-9"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 317 x 56
##    artist track date.entered   wk0   wk1   wk2   wk3   wk4   wk5   wk6   wk7
##    &lt;chr&gt;  &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Aguil~ What~ 1999-11-27      13    11     1     1     2     2     3     3
##  2 Amber  Sexu~ 1999-07-17      69    59    58    58    49    44    42    46
##  3 Backs~ Show~ 2000-01-01      74    62    55    25    16    14    12    10
##  4 Blaque Brin~ 1999-10-23       9     9    10     5     5     6     8     9
##  5 Blige~ Deep~ 1999-11-13      64    65    67    63    67    75    85    94
##  6 Blink~ All ~ 1999-12-04      59    51    50    35    26    15     7     6
##  7 Brock~ A Co~ 2000-01-01      93    75    92    NA    NA    NA    NA    NA
##  8 Carey~ Than~ 1999-12-11      50    41    37    26    22    22     2     1
##  9 Count~ Hang~ 1999-11-06      35    32    29    29    28    32    38    48
## 10 Creed  High~ 1999-09-11      61    57    60    61    NA    NA    NA    NA
## # ... with 307 more rows, and 45 more variables: wk8 &lt;dbl&gt;, wk9 &lt;dbl&gt;,
## #   wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;, wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;,
## #   wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;, wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;,
## #   wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;, wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;,
## #   wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;, wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;,
## #   wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;, wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;,
## #   wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;,
## #   wk46 &lt;dbl&gt;, wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, wk49 &lt;dbl&gt;, wk50 &lt;dbl&gt;, wk51 &lt;dbl&gt;,
## #   wk52 &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="two-table-verbs" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Two Table Verbs</h2>
<p>In the previous lesson we looked at the <em>verbs</em> associated with a single table. However, a lot of the time, our data doesn’t come in a nice and neat single spreadsheet so we might have to combine multiple datasets into a single tibble. There are various ways to do this kind of combining depending on what the data looks like and our intentions with it.</p>
<div id="bind_rows" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> bind_rows()</h3>
<p>If we have two tables that are (more or less) the same, we can just stick them together with one on top of the other.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="enter-the-tidyverse-whats-next.html#cb208-1"></a>data1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dt">y=</span><span class="kw">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;blue&quot;</span>))</span>
<span id="cb208-2"><a href="enter-the-tidyverse-whats-next.html#cb208-2"></a>data2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">4</span><span class="op">:</span><span class="dv">6</span>,<span class="dt">y=</span><span class="kw">c</span>(<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;purple&quot;</span>,<span class="st">&quot;yellow&quot;</span>))</span>
<span id="cb208-3"><a href="enter-the-tidyverse-whats-next.html#cb208-3"></a></span>
<span id="cb208-4"><a href="enter-the-tidyverse-whats-next.html#cb208-4"></a>data1</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##       x y    
##   &lt;int&gt; &lt;chr&gt;
## 1     1 red  
## 2     2 green
## 3     3 blue</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="enter-the-tidyverse-whats-next.html#cb210-1"></a>data2</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##       x y     
##   &lt;int&gt; &lt;chr&gt; 
## 1     4 orange
## 2     5 purple
## 3     6 yellow</code></pre>
<p>To do this, we just pass both tables to the <code>bind_rows()</code> function which will essentially stack them on top of eachother</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="enter-the-tidyverse-whats-next.html#cb212-1"></a><span class="kw">bind_rows</span>(data1,data2)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##       x y     
##   &lt;int&gt; &lt;chr&gt; 
## 1     1 red   
## 2     2 green 
## 3     3 blue  
## 4     4 orange
## 5     5 purple
## 6     6 yellow</code></pre>
<p>This function can take in as many tables as we want (for now, we’ll just put in two). If we want to bind more together, just pass them as extra arguments</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="enter-the-tidyverse-whats-next.html#cb214-1"></a><span class="kw">bind_rows</span>(</span>
<span id="cb214-2"><a href="enter-the-tidyverse-whats-next.html#cb214-2"></a>  data1,</span>
<span id="cb214-3"><a href="enter-the-tidyverse-whats-next.html#cb214-3"></a>  data2,</span>
<span id="cb214-4"><a href="enter-the-tidyverse-whats-next.html#cb214-4"></a>  <span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">7</span>,<span class="dt">y=</span><span class="st">&quot;black&quot;</span>),</span>
<span id="cb214-5"><a href="enter-the-tidyverse-whats-next.html#cb214-5"></a>  <span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">8</span>,<span class="dt">y=</span><span class="st">&quot;white&quot;</span>),</span>
<span id="cb214-6"><a href="enter-the-tidyverse-whats-next.html#cb214-6"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 2
##       x y     
##   &lt;dbl&gt; &lt;chr&gt; 
## 1     1 red   
## 2     2 green 
## 3     3 blue  
## 4     4 orange
## 5     5 purple
## 6     6 yellow
## 7     7 black 
## 8     8 white</code></pre>
<p>This is a very simple procedure, however we can add a bit of complexity if we want to keep track of where our data is coming from. For example, you might record a lot of data and so have a spreadsheet for each participant. We can add a new column that will identify each tibble we are binding</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="enter-the-tidyverse-whats-next.html#cb216-1"></a><span class="kw">bind_rows</span>(</span>
<span id="cb216-2"><a href="enter-the-tidyverse-whats-next.html#cb216-2"></a>  <span class="dt">set1 =</span> data1,</span>
<span id="cb216-3"><a href="enter-the-tidyverse-whats-next.html#cb216-3"></a>  <span class="dt">set2 =</span> data2,</span>
<span id="cb216-4"><a href="enter-the-tidyverse-whats-next.html#cb216-4"></a>  <span class="dt">.id =</span> <span class="st">&quot;set&quot;</span></span>
<span id="cb216-5"><a href="enter-the-tidyverse-whats-next.html#cb216-5"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   set       x y     
##   &lt;chr&gt; &lt;int&gt; &lt;chr&gt; 
## 1 set1      1 red   
## 2 set1      2 green 
## 3 set1      3 blue  
## 4 set2      4 orange
## 5 set2      5 purple
## 6 set2      6 yellow</code></pre>
<p><code>bind_rows()</code> even works if your data isn’t the exact same, it’ll just put <code>NA</code> where there was missing data:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="enter-the-tidyverse-whats-next.html#cb218-1"></a><span class="kw">bind_rows</span>(</span>
<span id="cb218-2"><a href="enter-the-tidyverse-whats-next.html#cb218-2"></a>  data1,</span>
<span id="cb218-3"><a href="enter-the-tidyverse-whats-next.html#cb218-3"></a>  <span class="kw">tibble</span>(<span class="dt">x=</span><span class="dv">8</span>)</span>
<span id="cb218-4"><a href="enter-the-tidyverse-whats-next.html#cb218-4"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##       x y    
##   &lt;dbl&gt; &lt;chr&gt;
## 1     1 red  
## 2     2 green
## 3     3 blue 
## 4     8 &lt;NA&gt;</code></pre>
</div>
<div id="bind_cols" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> bind_cols()</h3>
<p>Just like with <code>select()</code> and <code>filter()</code> which work on columns &amp; rows respectively, <code>bind_rows()</code> has a twin called <code>bind_cols()</code> and this will stick the tables together next to one another.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="enter-the-tidyverse-whats-next.html#cb220-1"></a>data3 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">z=</span><span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>,<span class="st">&quot;dog&quot;</span>,<span class="st">&quot;mouse&quot;</span>),<span class="dt">w=</span><span class="dv">100</span><span class="op">:</span><span class="dv">102</span>)</span>
<span id="cb220-2"><a href="enter-the-tidyverse-whats-next.html#cb220-2"></a><span class="kw">bind_cols</span>(data1,data3)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##       x y     z         w
##   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
## 1     1 red   cat     100
## 2     2 green dog     101
## 3     3 blue  mouse   102</code></pre>
</div>
<div id="joins" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> joins</h3>
<p>The above two methods of combining data don’t do an awful lot. They just stick the data together without changing much. However, we might want to match our data together based on a common identifier. For this, we’re going to use some data on flights leaving New York City, which is stored in a package called <code>nycflights</code></p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="enter-the-tidyverse-whats-next.html#cb222-1"></a><span class="kw">library</span>(nycflights13)</span>
<span id="cb222-2"><a href="enter-the-tidyverse-whats-next.html#cb222-2"></a>flights2 &lt;-<span class="st"> </span><span class="kw">select</span>(flights,year,month,day,hour,origin,dest,tailnum,carrier)</span>
<span id="cb222-3"><a href="enter-the-tidyverse-whats-next.html#cb222-3"></a>flights2</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 8
##     year month   day  hour origin dest  tailnum carrier
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  
##  1  2013     1     1     5 EWR    IAH   N14228  UA     
##  2  2013     1     1     5 LGA    IAH   N24211  UA     
##  3  2013     1     1     5 JFK    MIA   N619AA  AA     
##  4  2013     1     1     5 JFK    BQN   N804JB  B6     
##  5  2013     1     1     6 LGA    ATL   N668DN  DL     
##  6  2013     1     1     5 EWR    ORD   N39463  UA     
##  7  2013     1     1     6 EWR    FLL   N516JB  B6     
##  8  2013     1     1     6 LGA    IAD   N829AS  EV     
##  9  2013     1     1     6 JFK    MCO   N593JB  B6     
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA     
## # ... with 336,766 more rows</code></pre>
<p>As well as the actual flight information, this package also contains data about the airlines, which we can see here</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="enter-the-tidyverse-whats-next.html#cb224-1"></a>airlines</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<p>How would we go about sticking these together. We can’t just <code>bind_cols()</code> since we want to match them based on the value in <code>carrier</code>. To do this, we can use <code>left_join()</code>:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="enter-the-tidyverse-whats-next.html#cb226-1"></a>flights2 <span class="op">%&gt;%</span></span>
<span id="cb226-2"><a href="enter-the-tidyverse-whats-next.html#cb226-2"></a><span class="st">  </span><span class="kw">left_join</span>(airlines,</span>
<span id="cb226-3"><a href="enter-the-tidyverse-whats-next.html#cb226-3"></a>            <span class="dt">by=</span><span class="st">&quot;carrier&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 9
##     year month   day  hour origin dest  tailnum carrier name                    
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;                   
##  1  2013     1     1     5 EWR    IAH   N14228  UA      United Air Lines Inc.   
##  2  2013     1     1     5 LGA    IAH   N24211  UA      United Air Lines Inc.   
##  3  2013     1     1     5 JFK    MIA   N619AA  AA      American Airlines Inc.  
##  4  2013     1     1     5 JFK    BQN   N804JB  B6      JetBlue Airways         
##  5  2013     1     1     6 LGA    ATL   N668DN  DL      Delta Air Lines Inc.    
##  6  2013     1     1     5 EWR    ORD   N39463  UA      United Air Lines Inc.   
##  7  2013     1     1     6 EWR    FLL   N516JB  B6      JetBlue Airways         
##  8  2013     1     1     6 LGA    IAD   N829AS  EV      ExpressJet Airlines Inc.
##  9  2013     1     1     6 JFK    MCO   N593JB  B6      JetBlue Airways         
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA      American Airlines Inc.  
## # ... with 336,766 more rows</code></pre>
<p>As well as supplying the two datasets, we’ve also told R which variable we want to match on. By default, R will just look at which variables appear in both datasets and match on those. And yes, you can match on multiple variables, like so.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="enter-the-tidyverse-whats-next.html#cb228-1"></a>flights2 <span class="op">%&gt;%</span></span>
<span id="cb228-2"><a href="enter-the-tidyverse-whats-next.html#cb228-2"></a><span class="st">  </span><span class="kw">left_join</span>(</span>
<span id="cb228-3"><a href="enter-the-tidyverse-whats-next.html#cb228-3"></a>    <span class="kw">select</span>(weather,origin,year,month,day,hour,temp)</span>
<span id="cb228-4"><a href="enter-the-tidyverse-whats-next.html#cb228-4"></a>  )</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;origin&quot;)</code></pre>
<pre><code>## # A tibble: 336,776 x 9
##     year month   day  hour origin dest  tailnum carrier  temp
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;
##  1  2013     1     1     5 EWR    IAH   N14228  UA       39.0
##  2  2013     1     1     5 LGA    IAH   N24211  UA       39.9
##  3  2013     1     1     5 JFK    MIA   N619AA  AA       39.0
##  4  2013     1     1     5 JFK    BQN   N804JB  B6       39.0
##  5  2013     1     1     6 LGA    ATL   N668DN  DL       39.9
##  6  2013     1     1     5 EWR    ORD   N39463  UA       39.0
##  7  2013     1     1     6 EWR    FLL   N516JB  B6       37.9
##  8  2013     1     1     6 LGA    IAD   N829AS  EV       39.9
##  9  2013     1     1     6 JFK    MCO   N593JB  B6       37.9
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA       39.9
## # ... with 336,766 more rows</code></pre>
<p>Above we used the <code>left_join()</code> function, but there are actually four main types of <code>*_join()</code> functions in R. They each match the data in slightly different ways.</p>
<div id="full_join" class="section level4" number="3.3.3.1">
<h4><span class="header-section-number">3.3.3.1</span> full_join()</h4>
<p><code>full_join()</code> will match every instance in your two datasets.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="enter-the-tidyverse-whats-next.html#cb231-1"></a>data1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,<span class="dt">x=</span><span class="kw">runif</span>(<span class="dv">4</span>))</span>
<span id="cb231-2"><a href="enter-the-tidyverse-whats-next.html#cb231-2"></a>data2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">id =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">7</span>,<span class="dt">y=</span><span class="kw">runif</span>(<span class="dv">6</span>))</span>
<span id="cb231-3"><a href="enter-the-tidyverse-whats-next.html#cb231-3"></a><span class="kw">full_join</span>(data1,data2,<span class="dt">by=</span><span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##      id      x       y
##   &lt;int&gt;  &lt;dbl&gt;   &lt;dbl&gt;
## 1     1  0.565 NA     
## 2     2  0.140  0.229 
## 3     3  0.254  0.152 
## 4     4  0.154  0.669 
## 5     5 NA      0.0199
## 6     6 NA      0.756 
## 7     7 NA      0.740</code></pre>
<p>The value of <code>id = 5</code> isn’t present in <code>data1</code> and so there isn’t a row associated with that in the data and so R just puts an <code>NA</code> in those. Similarly for the other <code>NA</code> values, they’re not present in both datasets. <code>full_join()</code> will return every row from both data sets being joined together.</p>
</div>
<div id="inner_join" class="section level4" number="3.3.3.2">
<h4><span class="header-section-number">3.3.3.2</span> inner_join()</h4>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="enter-the-tidyverse-whats-next.html#cb233-1"></a><span class="kw">inner_join</span>(data1,data2,<span class="dt">by=</span><span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##      id     x     y
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     2 0.140 0.229
## 2     3 0.254 0.152
## 3     4 0.154 0.669</code></pre>
<p>The <code>inner_join()</code> function returns only the rows that are in <em>both</em> datasets. It doesn’t give us any <code>NA</code>, and returns a relatively small dataset.</p>
</div>
<div id="left_join-right_join" class="section level4" number="3.3.3.3">
<h4><span class="header-section-number">3.3.3.3</span> left_join() &amp; right_join()</h4>
<p>The <code>left_join()</code> and <code>right_join()</code> functions will keep everything from either the first or the second dataset being supplied.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="enter-the-tidyverse-whats-next.html#cb235-1"></a><span class="kw">left_join</span>(data1,data2,<span class="dt">by=</span><span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##      id     x      y
##   &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 0.565 NA    
## 2     2 0.140  0.229
## 3     3 0.254  0.152
## 4     4 0.154  0.669</code></pre>
<p>Here, we don’t keep the rows from <code>y</code> that are not in <code>x</code> (i.e. <code>id = 5,6,7</code>).</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="enter-the-tidyverse-whats-next.html#cb237-1"></a><span class="kw">right_join</span>(data1,data2,<span class="dt">by=</span><span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##      id      x      y
##   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     2  0.140 0.229 
## 2     3  0.254 0.152 
## 3     4  0.154 0.669 
## 4     5 NA     0.0199
## 5     6 NA     0.756 
## 6     7 NA     0.740</code></pre>
<p>This time we have everything from <code>y</code>, but not all of the results for <code>x</code> because there isn’t a row for <code>id=1</code> in the <code>data2</code> dataset.</p>
</div>
</div>
</div>
<div id="decisions" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Decisions</h2>
<p>Not all tasks in R require us to do maths or logical. Sometimes, we might have to make a choice of what to return based on an input. Here well have a look at some of the options available if we need to make decisions like this</p>
<div id="if_else" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> if_else()</h3>
<p>The <code>if_else()</code> function takes in three arguments, which should all be either vectors of the same length, or length 1. The first argument is then analysed and it should return a logical vector (<code>TRUE</code>s and <code>FALSE</code>s). Wherever this logical vector is <code>TRUE</code>, it will return the appropriate value from the second argument, and wherever it is <code>FALSE</code>, it will return the appropriate value from the third argument.</p>
<p>Let’s see it in action:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="enter-the-tidyverse-whats-next.html#cb239-1"></a>logical_vector &lt;-<span class="st"> </span><span class="kw">c</span>(T,T,F,F,T)</span>
<span id="cb239-2"><a href="enter-the-tidyverse-whats-next.html#cb239-2"></a>true_response &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb239-3"><a href="enter-the-tidyverse-whats-next.html#cb239-3"></a>false_response &lt;-<span class="st"> </span>letters[<span class="dv">22</span><span class="op">:</span><span class="dv">26</span>]</span>
<span id="cb239-4"><a href="enter-the-tidyverse-whats-next.html#cb239-4"></a><span class="kw">if_else</span>(</span>
<span id="cb239-5"><a href="enter-the-tidyverse-whats-next.html#cb239-5"></a>  logical_vector,</span>
<span id="cb239-6"><a href="enter-the-tidyverse-whats-next.html#cb239-6"></a>  true_response,</span>
<span id="cb239-7"><a href="enter-the-tidyverse-whats-next.html#cb239-7"></a>  false_response</span>
<span id="cb239-8"><a href="enter-the-tidyverse-whats-next.html#cb239-8"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;x&quot; &quot;y&quot; &quot;e&quot;</code></pre>
<p>So, since our logical vector has <code>TRUE</code> for the first two values, the first two values from the <code>true_response</code> are given here, followed by two from the <code>false_response</code> and then finally the <code>true_response</code>.</p>
<p>This is a very quick way to make a vectorised choice in R. And don’t forget, this function can be used in a <code>mutate()</code> function to edit our datasets</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="enter-the-tidyverse-whats-next.html#cb241-1"></a>flights2 <span class="op">%&gt;%</span></span>
<span id="cb241-2"><a href="enter-the-tidyverse-whats-next.html#cb241-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">am_pm =</span> <span class="kw">if_else</span>(hour <span class="op">&lt;</span><span class="st"> </span><span class="dv">12</span>, <span class="st">&quot;am&quot;</span>,<span class="st">&quot;pm&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb241-3"><a href="enter-the-tidyverse-whats-next.html#cb241-3"></a><span class="st">  </span><span class="kw">slice_sample</span>(<span class="dt">n=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 9
##     year month   day  hour origin dest  tailnum carrier am_pm
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;
##  1  2013    10    18    16 LGA    MSP   N944DL  DL      pm   
##  2  2013     9    16    15 LGA    ORF   N724EV  EV      pm   
##  3  2013    12    30    15 LGA    MIA   N3AYAA  AA      pm   
##  4  2013     8    27    21 LGA    DTW   N1EAMQ  MQ      pm   
##  5  2013     2    26     9 JFK    BUF   N599JB  B6      am   
##  6  2013     8     6     6 EWR    IND   N11199  EV      am   
##  7  2013    11    14    10 LGA    CLT   N713UW  US      am   
##  8  2013    10    27    12 EWR    DAY   N13913  EV      pm   
##  9  2013     4    21    18 LGA    XNA   N717MQ  MQ      pm   
## 10  2013     6    16    13 EWR    STL   N12563  EV      pm</code></pre>
</div>
<div id="recode" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> recode()</h3>
<p>The <code>if_else()</code> function is useful for making a decision between two options, but that situation doesn’t arise very often. Sometimes, we might need to replace a certain value and so the <code>recode()</code> function is useful for that</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="enter-the-tidyverse-whats-next.html#cb243-1"></a>flights2 <span class="op">%&gt;%</span></span>
<span id="cb243-2"><a href="enter-the-tidyverse-whats-next.html#cb243-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">month_string =</span> <span class="kw">recode</span>(month,</span>
<span id="cb243-3"><a href="enter-the-tidyverse-whats-next.html#cb243-3"></a>                               <span class="st">`</span><span class="dt">1</span><span class="st">`</span>=<span class="st">&quot;January&quot;</span>,</span>
<span id="cb243-4"><a href="enter-the-tidyverse-whats-next.html#cb243-4"></a>                               <span class="st">`</span><span class="dt">2</span><span class="st">`</span>=<span class="st">&quot;February&quot;</span>,</span>
<span id="cb243-5"><a href="enter-the-tidyverse-whats-next.html#cb243-5"></a>                               <span class="st">`</span><span class="dt">3</span><span class="st">`</span>=<span class="st">&quot;March&quot;</span>,</span>
<span id="cb243-6"><a href="enter-the-tidyverse-whats-next.html#cb243-6"></a>                               <span class="st">`</span><span class="dt">4</span><span class="st">`</span>=<span class="st">&quot;April&quot;</span>,</span>
<span id="cb243-7"><a href="enter-the-tidyverse-whats-next.html#cb243-7"></a>                               <span class="st">`</span><span class="dt">5</span><span class="st">`</span>=<span class="st">&quot;May&quot;</span>,</span>
<span id="cb243-8"><a href="enter-the-tidyverse-whats-next.html#cb243-8"></a>                               <span class="st">`</span><span class="dt">6</span><span class="st">`</span>=<span class="st">&quot;June&quot;</span>,</span>
<span id="cb243-9"><a href="enter-the-tidyverse-whats-next.html#cb243-9"></a>                               <span class="st">`</span><span class="dt">7</span><span class="st">`</span>=<span class="st">&quot;July&quot;</span>,</span>
<span id="cb243-10"><a href="enter-the-tidyverse-whats-next.html#cb243-10"></a>                               <span class="st">`</span><span class="dt">8</span><span class="st">`</span>=<span class="st">&quot;August&quot;</span>,</span>
<span id="cb243-11"><a href="enter-the-tidyverse-whats-next.html#cb243-11"></a>                               <span class="st">`</span><span class="dt">9</span><span class="st">`</span>=<span class="st">&quot;September&quot;</span>,</span>
<span id="cb243-12"><a href="enter-the-tidyverse-whats-next.html#cb243-12"></a>                               <span class="st">`</span><span class="dt">10</span><span class="st">`</span>=<span class="st">&quot;October&quot;</span>,</span>
<span id="cb243-13"><a href="enter-the-tidyverse-whats-next.html#cb243-13"></a>                               <span class="st">`</span><span class="dt">11</span><span class="st">`</span>=<span class="st">&quot;November&quot;</span>,</span>
<span id="cb243-14"><a href="enter-the-tidyverse-whats-next.html#cb243-14"></a>                               <span class="st">`</span><span class="dt">12</span><span class="st">`</span>=<span class="st">&quot;December&quot;</span>,</span>
<span id="cb243-15"><a href="enter-the-tidyverse-whats-next.html#cb243-15"></a>                               )) <span class="op">%&gt;%</span></span>
<span id="cb243-16"><a href="enter-the-tidyverse-whats-next.html#cb243-16"></a><span class="st">  </span><span class="kw">slice_sample</span>(<span class="dt">n=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 9
##     year month   day  hour origin dest  tailnum carrier month_string
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;       
##  1  2013     2     7    16 JFK    CLT   N249JB  B6      February    
##  2  2013     6    17    15 LGA    DFW   N3JRAA  AA      June        
##  3  2013    12    25    10 LGA    CLT   N770UW  US      December    
##  4  2013     5    29    16 EWR    SFO   N38467  UA      May         
##  5  2013     2    20     8 LGA    DEN   N562UA  UA      February    
##  6  2013    12    12    16 EWR    RDU   N13978  EV      December    
##  7  2013     4    15     5 LGA    IAH   N578UA  UA      April       
##  8  2013     7     2    18 EWR    SFO   N509UA  UA      July        
##  9  2013     4    21     6 LGA    MKE   N410WN  WN      April       
## 10  2013     6    25    18 JFK    PBI   N559JB  B6      June</code></pre>
</div>
<div id="case_when" class="section level3" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> case_when()</h3>
<p>However, the <code>recode()</code> function isn’t too flexible, it’ll only look at a single variable and then decide what to do based on that value. We might want to check something more complicated, and so for things like that we can use the <code>case_when()</code> function, which has a unique syntax.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="enter-the-tidyverse-whats-next.html#cb245-1"></a>flights2 <span class="op">%&gt;%</span></span>
<span id="cb245-2"><a href="enter-the-tidyverse-whats-next.html#cb245-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">season =</span> <span class="kw">case_when</span>(</span>
<span id="cb245-3"><a href="enter-the-tidyverse-whats-next.html#cb245-3"></a>    month <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span>month <span class="op">==</span><span class="st"> </span><span class="dv">12</span> <span class="op">~</span><span class="st"> &quot;Winter&quot;</span>,</span>
<span id="cb245-4"><a href="enter-the-tidyverse-whats-next.html#cb245-4"></a>    month <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> &quot;Spring&quot;</span>,</span>
<span id="cb245-5"><a href="enter-the-tidyverse-whats-next.html#cb245-5"></a>    month <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span> <span class="op">~</span><span class="st"> &quot;Summer&quot;</span>,</span>
<span id="cb245-6"><a href="enter-the-tidyverse-whats-next.html#cb245-6"></a>    T <span class="op">~</span><span class="st"> &quot;Autumn&quot;</span></span>
<span id="cb245-7"><a href="enter-the-tidyverse-whats-next.html#cb245-7"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 9
##     year month   day  hour origin dest  tailnum carrier season
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; 
##  1  2013     1     1     5 EWR    IAH   N14228  UA      Winter
##  2  2013     1     1     5 LGA    IAH   N24211  UA      Winter
##  3  2013     1     1     5 JFK    MIA   N619AA  AA      Winter
##  4  2013     1     1     5 JFK    BQN   N804JB  B6      Winter
##  5  2013     1     1     6 LGA    ATL   N668DN  DL      Winter
##  6  2013     1     1     5 EWR    ORD   N39463  UA      Winter
##  7  2013     1     1     6 EWR    FLL   N516JB  B6      Winter
##  8  2013     1     1     6 LGA    IAD   N829AS  EV      Winter
##  9  2013     1     1     6 JFK    MCO   N593JB  B6      Winter
## 10  2013     1     1     6 LGA    ORD   N3ALAA  AA      Winter
## # ... with 336,766 more rows</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="enter-the-tidyverse-verbs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="show-your-work.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
